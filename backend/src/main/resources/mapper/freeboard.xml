<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafyns.blind.mapper.FreeboardMapper">
    <insert id="save">
        INSERT INTO freeboard(freeboard_title, freeboard_content, freeboard_date, freeboard_hits, freeboard_likes, freeboard_account_id) VALUES (#{freeboardTitle}, #{freeboardContent}, #{freeboardDate}, #{freeboardHits}, #{freeboardLikes}, #{freeboardAccountId})
    </insert>

    <select id="findFreeboards" resultMap="freeboardMap">
        select *
        from freeboard
    </select>

    <select id="findByBoardNo" parameterType="long" resultMap="freeboardMap">
        select *
        from freeboard
        where freeboard_no = #{freeboardNo}
    </select>

    <update id="updateByBoardNo" parameterType="BoardDto">
        update freeboard
        set freeboard_title = #{freeboardTitle},
            freeboard_content = #{freeboardContent},
            freeboard_hits = #{freeboardHits},
            freeboard_likes = #{freeboardLikes}
        where freeboard_no = #{freeboardNo}
    </update>

    <delete id="deleteByBoardNo" parameterType="long">
        delete
        from freeboard
        where freeboard_no = #{freeboardNo}
    </delete>


    <select id="findByTitle" parameterType="String" resultMap="freeboardMap">
        select *
        from freeboard
        where freeboard_title like CONCAT('%',#{freeboardTitle},'%')
    </select>

    <resultMap id="freeboardMap" type="freeboard">
        <id property="freeboardNo" column="freeboard_no"/>
        <result property="freeboardTitle" column="freeboard_title"/>
        <result property="freeboardContent" column="freeboard_content"/>
        <result property="freeboardDate" column="freeboard_date"/>
        <result property="freeboardHits" column="freeboard_hits"/>
        <result property="freeboardLikes" column="freeboard_likes"/>
        <result property="freeboardAccountId" column="freeboard_account_id"/>
    </resultMap>

</mapper>